<!DOCTYPE html>
<html>
<head>
    <title>Contact Page</title>
</head>
<body>
    <div class="home" style="width: 100%;height: 100vh;">
        <h1>This is home</h1>
    </div>
    <div class="about" style="width: 100%;height: 100vh;">
        <h1>This is about</h1>
    </div>
    <h1>Contact Form</h1>

    <p id="success-message" style="color: green; display: none;">
        Form submitted successfully!
    </p>

    <form id="contactForm">
    <input type="text" name="name" required />
    <input type="email" name="email" required />
    <textarea name="message" required></textarea>
    <button type="submit" id="submitBtn">Submit</button>
</form>

<p id="statusMessage" style="color: blue; display: none;"></p>

<script>
    const form = document.getElementById('contactForm');
    const statusMessage = document.getElementById('statusMessage');
    const submitBtn = document.getElementById('submitBtn');

    form.addEventListener('submit', function(e) {
        e.preventDefault();

        // Disable button + show loading message
        submitBtn.disabled = true;
        statusMessage.style.display = 'block';
        statusMessage.style.color = 'blue';
        statusMessage.textContent = 'Submitting...';

        const formData = new FormData(form);

        fetch('/contact', {
            method: 'POST',
            body: new URLSearchParams(formData)
        })
        .then(res => {
            if (res.ok) {
                // Success message
                statusMessage.style.color = 'green';
                statusMessage.textContent = 'Form submitted successfully!';
                form.reset();
            } else {
                statusMessage.style.color = 'red';
                statusMessage.textContent = 'Something went wrong!';
            }
        })
        .catch(err => {
            statusMessage.style.color = 'red';
            statusMessage.textContent = 'Error submitting form!';
            console.error(err);
        })
        .finally(() => {
            submitBtn.disabled = false; // Enable button again
        });
    });
</script>

</body>
</html>